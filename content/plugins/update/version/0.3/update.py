"""@Author: Shine_Light@Version: 1.0@Date: 2022/4/21 13:20"""import requestsimport os# 路径处理dir_path = os.path.dirname(os.path.abspath(__file__))dir_path = dir_path.split("\\")dir_path.pop(-1)dir = ""for a in dir_path:    dir += a + "/"version = float(requests.get("http://cdn.shinelight.xyz/nonebot/version.html").text)dir_source = dirdir_last = dir_source + str(version) + "/"dir_base = dir.replace(f"content/plugins/update/version/", "")dir_plugin = dir_base + "content/plugins/"url_base = "http://cdn.shinelight.xyz/nonebot/version/" + f"{version}/"# 下载工具def download_to_plugin(path, *args):    last = ".py"    if args:        last = args[0]    with open(dir_plugin + path + last, 'w+', encoding="utf-8") as file:        file.write(requests.get(url_base + path + last).text)# 翻译文件更新with open(dir_base + "config/" + "translate.json", "w+", encoding="utf-8") as file:    file.write(requests.get("http://cdn.shinelight.xyz/nonebot/translate.json").text)    file.close()# 权限文件更新for f in os.listdir(dir_base + "config/" + "permission/" + "common"):    name = f.split(".")[0]    with open(dir_base + "config/" + "permission/" + "common/" + f"{name}.json", "w+", encoding="utf-8") as file:        file.write(requests.get("http://cdn.shinelight.xyz/nonebot/permission_common.json").text)        file.close()for f in os.listdir(dir_base + "config/" + "permission/" + "special"):    name = f.split(".")[0]    with open(dir_base + "config/" + "permission/" + "special/" + f"{name}.json", "w+", encoding="utf-8") as file:        file.write(requests.get("http://cdn.shinelight.xyz/nonebot/permission_special.json").text)        file.close()# 更新部分# 菜单download_to_plugin("menu/__init__")# 权限系统download_to_plugin("permission/__init__")# 插件开关download_to_plugin("plugin_control/__init__")download_to_plugin("plugin_control/functions")# 俄罗斯轮盘download_to_plugin("russian/__init__")# 工具类download_to_plugin("utils/__init__")download_to_plugin("utils/database_mysql")download_to_plugin("utils/path")download_to_plugin("utils/hook_update")# 撤回download_to_plugin("withdraw/__init__")# 词云download_to_plugin("word_cloud/__init__")# 新增部分# 黑杰克os.mkdir(dir_plugin + "blackjack/")download_to_plugin("blackjack/__init__")download_to_plugin("blackjack/card")download_to_plugin("blackjack/game")# 答案之书os.mkdir(dir_plugin + "answersbook/")download_to_plugin("answersbook/__init__")download_to_plugin("answersbook/answersbook", ".json")# Epic限免资讯os.mkdir(dir_plugin + "epicfree/")download_to_plugin("epicfree/__init__")download_to_plugin("epicfree/data_source")# 结束